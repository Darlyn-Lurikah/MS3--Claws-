{% extends "base.html" %}
{% block content %}

<h3 class="center-align">Add new post</h3>

<!-- Add task form. For logged in users only -->
<div class="row">
    <form class="col s12" method="POST" action="{{ url_for('add_post') }}">
        <div class="row">
            <div class="input-field col s8 offset-s2">
                <input id="icon_prefix" name="title" type="text" minlength="5" maxlength="25" class="validate" required>
                <label for="icon_prefix">Post title</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s8 offset-s2">
              <textarea id="textarea2" name="post_caption" class="materialize-textarea" data-length="120" required></textarea>
              <label for="textarea2">Caption</label>
            </div>
        </div>

        <!-- Add image url -->
        <div class="row">
            <div class="file-field input-field col s8 offset-s2">
                <input id="image" name="image" class="validate" type="url" pattern="https?://.+" onchange="imagePreview();" required>
                <p><small>Copy and paste your image URL
                </small></p>
                <label for="image">Post Picture</label>    
            </div>
        </div>

        <!-- Submit and cancel buttons. Cancel goes to user profile -->
        <div class="row center-align">
        <button class="btn waves-effect waves-light" type="submit" name="action">Submit
            <i class="material-icons right"></i>
        </button>
        <a href="{{ url_for('profile', username=session['user']) }}"  class="btn waves-effect waves-light" aria-label="cancel">Cancel</a>
        </div>
    </form>

    <!-- Image preview. Removed hide class on change (url entered) -->
    <div class="container col s8 offset-s2 hide">
        <img class="responsive-img image-preview" src="#" alt="Preview of post image input">
    </div>
</div>

<!-- Preview image from url input -->


{% endblock %}

{% block script %}
<script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/es6-promise/4.1.1/es6-promise.auto.min.js"></script>
{%  endblock %}

